name: 'Lighthouse CI Compare Action - compatible with LHCI self-host server'
description:
  'Compare two Lighthouse CI builds and create an object and a Markdown Table
  with the differences.'
author: 'Danilo Velasquez/Franck Kerbiriou'

# Add your action's branding here. This will appear on the GitHub Marketplace.
branding:
  icon: 'check-circle'
  color: 'blue'

# Define your inputs here.
inputs:
  links-filepath:
    description:
      'The location of the links.json file generated by Lighthouse CI.'
    required: true
    default: '.lighthouseci/links.json'
  base-url:
    description:
      'The base URL of your lighthouse ci server, for example
      https://your-lhci-server.com/v1.'
    required: true
  project-id:
    description: 'The project ID of your Lighthouse CI project. This is a GUID.'
    required: true
  current-commit-sha:
    description: 'The current commit SHA.'
    required: true
  should-fail-build:
    description:
      'Tells the action if it should fail in case of any error or not.'
    default: 'false'
  basic-auth-username:
    description:
      'The username for basic authentication, if your Lighthouse CI server
      requires it.'
  basic-auth-password:
    description:
      'The password for basic authentication, if your Lighthouse CI server
      requires it.'

# Define your outputs here.
outputs:
  markdown:
    description: 'Markdown explanations and comparison result tables'
  comparedMetrics:
    description:
      'An object with the results, in case you want to use it for something
      else.'
  status:
    description:
      'Set to "success" if the action ran successfully or "failure" if any of
      the queries or the markdown generation failed.'
  failReason:
    description: 'The reason why the action failed, if it did.'

runs:
  using: node20
  main: dist/index.js
